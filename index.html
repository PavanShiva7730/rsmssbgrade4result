<!-- RESULT CHECK WIDGET -->
<div id="result-widget" style="max-width:450px;margin:20px auto;padding:20px;border-radius:10px;border:1px solid #ddd;font-family:Arial,Helvetica,sans-serif;background:#fff">
  <h2 style="text-align:center;margin-bottom:8px;">Check Your RSMSSB Result (TSP) </h2>

  <input
    type="text"
    id="rollNumber"
    placeholder="Enter Roll Number"
    style="width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:6px"
  />

  <input
    type="tel"
    id="mobile"
    placeholder="Enter Mobile Number"
    maxlength="10"
    style="width:100%;padding:10px;margin-bottom:12px;border:1px solid #ccc;border-radius:6px"
  />

  <button
    onclick="checkResult()"
    style="width:100%;padding:10px;background:#2563eb;color:#fff;border:none;border-radius:6px;font-size:15px;cursor:pointer"
  >
    Check Result
  </button>
  <div style="margin-top:14px;font-size:12px;line-height:1.5;color:#6b7280;text-align:center;">
    <strong>Disclaimer:</strong>  
    This result checker is provided only for informational purposes.  
    Testbook does not guarantee accuracy or official confirmation.  
    Candidates must verify results from the official RSMSSB website.
  </div>

  <div id="loader" style="display:none;text-align:center;margin-top:12px;font-size:14px;color:#444;">
    Checking resultâ€¦
  </div>

  <div id="resultBox" style="display:none;margin-top:15px;padding:12px;border-radius:6px;font-size:15px"></div>
</div>


<script>
const SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbyEFbIwc2XkTuOCng7OOBj5q9CqjIi2jWPhn8wI4mnLFnhRpnwmhAqqbtteFTTBk60P2g/exec";

function checkResult() {
  const rollNumber = document.getElementById("rollNumber").value.trim();
  const mobile = document.getElementById("mobile").value.trim();
  const loader = document.getElementById("loader");
  const resultBox = document.getElementById("resultBox");

  resultBox.style.display = "none";

  if (!rollNumber || !/^\d+$/.test(rollNumber)) {
    alert("Please enter a valid Roll Number");
    return;
  }
  if (!/^\d{10}$/.test(mobile)) {
    alert("Please enter a valid 10-digit mobile number");
    return;
  }

  loader.style.display = "block";
  resultBox.style.display = "none";

  fetch(`${SCRIPT_URL}?rollNumber=${encodeURIComponent(rollNumber)}&mobile=${encodeURIComponent(mobile)}`)
    .then(res => res.json())
    .then(data => {
      loader.style.display = "none";
      resultBox.style.display = "block";

      if (data.status === "success") {
        if (data.result === "Qualified") {
          resultBox.style.background = "#ecfdf5";
          resultBox.style.border = "1px solid #10b981";
          resultBox.innerHTML = `
            <strong style="color:#059669">ðŸŽ‰ Qualified!</strong><br>
            <b>Roll Number:</b> ${data.rollNumber}<br>
            <b>Status:</b> Qualified
          `;
        } else {
          resultBox.style.background = "#fff7ed";
          resultBox.style.border = "1px solid #f97316";
          resultBox.innerHTML = `
            <strong style="color:#b45309">Result:</strong><br>
            <b>Roll Number:</b> ${data.rollNumber}<br>
            <b>Status:</b> Not Qualified
          `;
        }
      } else {
        resultBox.style.background = "#fee2e2";
        resultBox.style.border = "1px solid #ef4444";
        resultBox.innerHTML = `<strong>Error:</strong> ${data.message || "Unexpected error"}`;
      }
    })
    .catch(() => {
      loader.style.display = "none";
      alert("Unable to fetch result. Please try again.");
    });
}
</script>
<!-- END RESULT CHECK WIDGET -->
